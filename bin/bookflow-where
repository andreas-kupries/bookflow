#!/usr/bin/env tclsh
# -*- tcl -*-
#########################
# Scan the current directory for jpeg files and use them to initialize
# a book flow project.

lappend auto_path [file dirname [file dirname [file normalize [info script]]]]/lib

# TODO: Restrict to images of a certain size and/or make (camera type).

package require Tcl 8.5
package require fileutil
package require fileutil::traverse
package require jpeg
package require bookflow::project

#########################

proc main {} {
    if {[catch {
	puts [cmdline]
	BOOK destroy
    } msg]} {
	puts stderr $msg
	exit 1
    }
    return
}

proc cmdline {} {
    global argv argv0
    if {[llength $argv] != 0} {
	puts stderr "Usage: $argv0"
	exit 1
    }

    # Set the project file up.
    set pfile [pwd]/BOOKFLOW

    bookflow::project BOOK $pfile
    return [BOOK where]
}

#########################

main
exit
